# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã Seed –ú–∏–≥—Ä–∞—Ü–∏–∏ - –†–µ–∑—é–º–µ

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è Seed —Ñ–∞–π–ª–∞ Prisma
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/lib/prisma/seed.ts` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ ID –¥–ª—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã TypeScript –æ—à–∏–±–∫–∏ —Å —Ç–∏–ø–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∏–¥–∏–Ω–≥–∞

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ò–º–ø–æ—Ä—Ç –∏–∑ `src/lib/dump-data/currentData.ts`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 7 —Ç–∞–±–ª–∏—Ü: User, Course, Lesson, Stage, StageTimecode, StageStatus, Tool
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 53 –∑–∞–ø–∏—Å–µ–π

### 3. –£–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å PostgreSQL sequences
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ timestamp –ø–æ–ª–µ–π (`createdAt`, `updatedAt`) –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ foreign key —Å–≤—è–∑–µ–π —á–µ—Ä–µ–∑ `connect`
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Seed –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
```
üå± –ù–∞—á–∏–Ω–∞–µ–º —Å–∏–¥–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏...
üìÖ –î–∞—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: 2025-07-18

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã: 7
‚úÖ –ö—É—Ä—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã: 1
‚úÖ –£—Ä–æ–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã: 5
‚úÖ –≠—Ç–∞–ø—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã: 7
‚úÖ –¢–∞–π–º–∫–æ–¥—ã —ç—Ç–∞–ø–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã: 15
‚úÖ –°—Ç–∞—Ç—É—Å—ã —ç—Ç–∞–ø–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã: 7
‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã: 11

üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–¥–∏–Ω–≥–∞:
–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: 53

üéâ –°–∏–¥–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!
```

### –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
```
=== –ü–†–ê–í–ò–õ–¨–ù–´–ô –°–ü–û–°–û–ë –°–û–ó–î–ê–ù–ò–Ø –£–†–û–ö–ê ===
‚úÖ –£—Ä–æ–∫ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!
üìù ID –Ω–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞: 29

=== –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –°–ü–û–°–û–ë –°–û–ó–î–ê–ù–ò–Ø –£–†–û–ö–ê ===
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ —Å id

=== –ü–†–û–í–ï–†–ö–ê SEQUENCE ===
üìä Sequence last_value: 29
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ú–∞–ø–ø–∏–Ω–≥ ID
```typescript
const idMapping: {
  users: { [key: number]: number };
  courses: { [key: number]: number };
  lessons: { [key: number]: number };
  stages: { [key: number]: number };
} = {
  users: {},
  courses: {},
  lessons: {},
  stages: {}
};
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–µ–π
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–≤—è–∑—å—é —Å –∫—É—Ä—Å–æ–º
const actualCourseId = idMapping.courses[courseId];
await prisma.lesson.upsert({
  where: { id: id },
  create: {
    ...lessonDataWithoutId,
    course: {
      connect: { id: actualCourseId }
    }
  },
  update: {
    ...lessonDataWithoutId,
    course: {
      connect: { id: actualCourseId }
    }
  },
});
```

### –°–±—Ä–æ—Å sequences
```sql
SELECT setval('"User_id_seq"', (SELECT MAX(id) FROM "User"));
SELECT setval('"Course_id_seq"', (SELECT MAX(id) FROM "Course"));
SELECT setval('"Lesson_id_seq"', (SELECT MAX(id) FROM "Lesson"));
SELECT setval('"Stage_id_seq"', (SELECT MAX(id) FROM "Stage"));
SELECT setval('"StageTimecode_id_seq"', (SELECT MAX(id) FROM "StageTimecode"));
SELECT setval('"StageStatus_id_seq"', (SELECT MAX(id) FROM "StageStatus"));
SELECT setval('"Tool_id_seq"', (SELECT MAX(id) FROM "Tool"));
```

## üöÄ –°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
node deploy-from-scratch.js
```

### 2. Seed —á–µ—Ä–µ–∑ Prisma
```bash
npx prisma db seed
```

### 3. –†—É—á–Ω–æ–π seed
```bash
node seed-current.js
```

## üìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `README_SEED_MIGRATION.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `DEPLOYMENT_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- ‚úÖ `PRISMA_LESSON_CREATION_GUIDE.md` - –°–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤
- ‚úÖ `QUICK_FIX_PRISMA_STUDIO.md` - –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- [x] Seed –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –í—Å–µ 53 –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] Foreign key —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [x] Sequences —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] TypeScript –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

### üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è:
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ Prisma Studio
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CI/CD pipeline

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-07-18  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
**–í–µ—Ä—Å–∏—è**: 2.0 